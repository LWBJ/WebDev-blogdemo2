(this["webpackJsonpblogdemo2-react"]=this["webpackJsonpblogdemo2-react"]||[]).push([[0],{20:function(e,a,t){e.exports=t(32)},25:function(e,a,t){},32:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(17),s=t.n(l),o=(t(25),t(2)),c=t.n(o),i=t(3),m=t(4),d=t(5),u=t(7),h=t(6),p=t(1),b=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={data:[],loading:!0,responseOK:""},n}return Object(d.a)(t,[{key:"mealData",value:function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t=1;case 2:return r="https://lwbjblogdemo2.herokuapp.com/apidata/MainMeal/?page="+t,e.next=5,fetch(r).then((function(e){return e.json()})).catch((function(e){return alert("Something went wrong"),{next:!1}}));case 5:(n=e.sent).results&&n.results.length>0?a=a.concat(n.results):(a=["Error"],n={next:!1}),t++;case 8:if(n.next){e.next=2;break}case 9:this.setState({loading:!1,data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.mainMeal&&(a.mainMeal="Please select an option"),a}},{key:"onSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://lwbjblogdemo2.herokuapp.com/apidata/MainMealInstance/",this.props.setLoading(),e.next=4,this.props.checkAuth();case 4:(n=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 7:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,a=this;this.state.loading?e=r.a.createElement("option",{value:""},"Loading"):this.state.data.length>0&&"Error"!==this.state.data[0]?(e=this.state.data.map((function(e){return r.a.createElement("option",{value:e.url},e.name)}))).push(r.a.createElement("option",{value:""},"")):e=r.a.createElement("option",null,"");var t=r.a.createElement(p.d,{initialValues:{mainMeal:"",day:this.props.day},onSubmit:function(e,t){var n=t.setSubmitting;a.onSubmit(e),n(!1)},validate:this.validate},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement(p.b,{name:"mainMeal",as:"select",className:"form-control"},e),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"mainMeal"})),a.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:t.isSubmitting},"Add"))))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return a.mealData()},type:"button","data-toggle":"modal","data-target":"#mealInstanceCreateModal"+this.props.id},"Add"),r.a.createElement("div",{class:"modal fade",id:"mealInstanceCreateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"mealInstanceCreateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"mealInstanceCreateModalLabel"+this.props.id},"Add meal for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component),f=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.mainMealInstance&&(a.mainMealInstance="Please select a value"),a}},{key:"onSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(a.mainMealInstance,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var a;a=204===e.status?r.a.createElement("p",null,"Item Deleted"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props.options.map((function(e){return r.a.createElement("option",{value:e.url},e.meal_name)}));a.push(r.a.createElement("option",null,""));var t=r.a.createElement("div",{className:"col"},r.a.createElement(p.d,{initialValues:{mainMealInstance:""},onSubmit:function(a,t){var n=t.setSubmitting,r=t.resetForm;e.onSubmit(a),n(!1),r()},validate:function(a){return e.validate(a)}},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement(p.b,{className:"form-control",name:"mainMealInstance",as:"select"},a),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"mainMealInstance"})),e.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-danger",type:"submit",disabled:t.isSubmitting},"Delete"))))})));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-toggle":"modal","data-target":"#mealInstanceDeleteModal"+this.props.id},"Delete"),r.a.createElement("div",{class:"modal fade",id:"mealInstanceDeleteModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"mealInstanceDeleteModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"mealInstanceDeleteModalLabel"+this.props.id},"Delete meal for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component),g=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],responseOK:null},n}return Object(d.a)(t,[{key:"getSnacks",value:function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],t=1;case 2:return r="https://lwbjblogdemo2.herokuapp.com/apidata/Snack/?page="+t,e.next=5,fetch(r).then((function(e){return e.json()})).catch((function(e){return alert("Something went wrong"),{next:!1}}));case 5:(n=e.sent).results&&n.results.length>0?a=a.concat(n.results):(a=["Error"],n={next:!1}),t++;case 8:if(n.next){e.next=2;break}case 9:this.setState({loading:!1,data:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.snack&&(a.snack="Please select a value"),a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),t="https://lwbjblogdemo2.herokuapp.com/apidata/SnackInstance/",e.next=4,this.props.checkAuth();case 4:(n=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 7:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,a=this;this.state.loading?e=r.a.createElement("option",{value:""},"Loading"):this.state.data.length>0&&"Error"!==this.state.data[0]?(e=this.state.data.map((function(e){return r.a.createElement("option",{value:e.url},e.name)}))).push(r.a.createElement("option",null,"")):e=r.a.createElement("option",null,"");var t=r.a.createElement(p.d,{initialValues:{snack:"",day:this.props.day},validate:function(e){return a.validate(e)},onSubmit:function(e,t){var n=t.setSubmitting;a.handleSubmit(e),n(!1)}},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement(p.b,{className:"form-control",name:"snack",as:"select"},e),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"snack"})),a.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",disabled:t.isSubmitting},"Add"))))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{onClick:function(){return a.getSnacks()},className:"btn btn-secondary",type:"button","data-toggle":"modal","data-target":"#snackInstanceCreateModal"+this.props.id},"Add"),r.a.createElement("div",{class:"modal fade",id:"snackInstanceCreateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"snackInstanceCreateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"snackInstanceCreateModalLabel"+this.props.id},"Add snack for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component),E=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(a.snackInstance,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var a;a=204===e.status?r.a.createElement("p",null,"Item Deleted"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong."),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.snackInstance&&(a.snackInstance="Please select an option"),a}},{key:"render",value:function(){var e=this,a=this.props.options.map((function(e){return r.a.createElement("option",{value:e.url},e.snack_name)}));a.push(r.a.createElement("option",null,""));var t=r.a.createElement(p.d,{initialValues:{snackInstance:""},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting,r=t.resetForm;e.handleSubmit(a),n(!1),r()}},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement(p.b,{name:"snackInstance",as:"select",className:"form-control"},a),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"snackInstance"})),e.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"submit",className:"btn btn-danger",disabled:t.isSubmitting},"Delete"))))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-toggle":"modal","data-target":"#snackInstanceDeleteModal"+this.props.id},"Delete"),r.a.createElement("div",{class:"modal fade",id:"snackInstanceDeleteModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"snackInstanceDeleteModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"snackInstanceDeleteModalLabel"+this.props.id},"Delete snack for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component),v=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],responseOK:null},n}return Object(d.a)(t,[{key:"getDrinks",value:function(){var e=Object(i.a)(c.a.mark((function e(){var a,t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="https://lwbjblogdemo2.herokuapp.com/apidata/Drink/?page=",t=[],n=1;case 3:return e.next=5,fetch(a+n).then((function(e){return e.json()})).catch((function(e){return alert("Oops, something went wrong"),{next:!1}}));case 5:(r=e.sent).results&&r.results.length>0?t=t.concat(r.results):(t=["Error"],r={next:!1}),n++;case 8:if(r.next){e.next=3;break}case 9:this.setState({data:t,loading:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.drink&&(a.drink="Please select an option"),a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),t="https://lwbjblogdemo2.herokuapp.com/apidata/DrinkInstance/",e.next=4,this.props.checkAuth();case 4:(n=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 7:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,a=this;this.state.loading?e=r.a.createElement("option",{value:""},"Loading"):this.state.data.length>0&&"Error"!==this.state.data[0]?(e=this.state.data.map((function(e){return r.a.createElement("option",{value:e.url},e.name)}))).push(r.a.createElement("option",null,"")):e=r.a.createElement("option",null,"");var t=r.a.createElement(p.d,{initialValues:{day:this.props.day,drink:""},validate:function(e){return a.validate(e)},onSubmit:function(e,t){var n=t.setSubmitting;a.handleSubmit(e),n(!1)}},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col"},r.a.createElement(p.b,{name:"drink",as:"select",className:"form-control"},e),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"drink"})),a.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"submit",className:"btn btn-primary",disabled:t.isSubmitting},"Add"))))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary",onClick:function(){return a.getDrinks()},type:"button","data-toggle":"modal","data-target":"#drinkInstanceCreateModal"+this.props.id},"Add"),r.a.createElement("div",{class:"modal fade",id:"drinkInstanceCreateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"drinkInstanceCreateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"drinkInstanceCreateModalLabel"+this.props.id},"Add meal for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component),y=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.drinkInstance&&(a.drinkInstance="Please select an option"),a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(a.drinkInstance,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var a;a=204===e.status?r.a.createElement("p",null,"Item Deleted"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Oops, something went wrong"),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.props.options.map((function(e){return r.a.createElement("option",{value:e.url},e.drink_name)}));a.push(r.a.createElement("option",null,""));var t=r.a.createElement(p.d,{initialValues:{drinkInstance:""},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting,r=t.resetForm;e.handleSubmit(a),n(!1),r()}},(function(t){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col"},r.a.createElement(p.b,{name:"drinkInstance",as:"select",className:"form-control"},a),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"drinkInstance"})),e.state.responseOK),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"submit",disabled:t.isSubmitting,className:"btn btn-danger"},"Delete"))))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-secondary",type:"button","data-toggle":"modal","data-target":"#drinkInstanceDeleteModal"+this.props.id},"Delete"),r.a.createElement("div",{class:"modal fade",id:"drinkInstanceDeleteModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"drinkInstanceDeleteModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"drinkInstanceDeleteModalLabel"+this.props.id},"Delete drink for ",this.props.id),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},t),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component);var k=function(e){var a=function(){var a=Object(i.a)(c.a.mark((function a(){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setLoading(),a.next=3,e.checkAuth();case 3:(t=a.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(e.day.url,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){204===e.status?alert("Day deleted"):401===e.status?alert("Error Occured. Check login again."):alert("Oops, something went wrong")})).then((function(a){return e.refreshList()})).catch((function(a){alert("Oops, something went wrong"),e.refreshList()}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("button",{type:"button",class:"btn btn-danger","data-toggle":"modal","data-target":"#dayDeleteModal"+e.day.date},"Delete Day"),r.a.createElement("div",{class:"modal fade",id:"dayDeleteModal"+e.day.date,tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLabel"},"Confirm Delete"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("p",null,"Delete the day ",e.day.date,"?"),r.a.createElement("p",null,"This action cannot be undone."),r.a.createElement("button",{className:"btn btn-danger",onClick:a,"data-dismiss":"modal"},"Delete")),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))};var N=function(e){var a,t=e.day;return e.username&&(a=r.a.createElement("div",null,r.a.createElement("div",{className:"row my-1 mt-4"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h5",{className:"mt-1"},r.a.createElement("strong",null,"Meals:"))),r.a.createElement(b,{day:t.url,id:t.date,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}),r.a.createElement(f,{id:t.date,options:t.main_meal_instances,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth})),r.a.createElement("div",{className:"row my-1"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h5",{className:"mt-1"},r.a.createElement("strong",null,"Snacks:"))),r.a.createElement(g,{day:t.url,id:t.date,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}),r.a.createElement(E,{id:t.date,options:t.snack_instances,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth})),r.a.createElement("div",{className:"row my-1"},r.a.createElement("div",{className:"col-4"},r.a.createElement("h5",{className:"mt-1"},r.a.createElement("strong",null,"Drinks:"))),r.a.createElement(v,{day:t.url,id:t.date,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}),r.a.createElement(y,{id:t.date,options:t.drink_instances,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth})),r.a.createElement("div",{className:"row my-2"},r.a.createElement("div",{className:"col"},r.a.createElement(k,{day:t,setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}))))),r.a.createElement("div",{className:"col-12 border rounded border-primary p-4 h-100"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",null,r.a.createElement("strong",null,"Date: ",t.date)))),r.a.createElement("div",{className:"row my-2 mb-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Meals: ",t.meals_set.join(", ")),r.a.createElement("p",null,"Snacks: ",t.snacks_set.join(", ")),r.a.createElement("p",null,"Drinks: ",t.drinks_set.join(", ")),r.a.createElement("p",null,"Calories: ",t.calories))),a)};var w=function(e){var a=function(){e.filterFunction({before:"",after:"",lower:"",higher:"",meal:"",snack:"",drink:"",order:"Date",ascending:"Descending"})};return r.a.createElement(p.d,{initialValues:{before:"",after:"",lower:"",higher:"",meal:"",snack:"",drink:"",order:"Date",ascending:"Descending"},validate:function(e){var a={};return e.before&&e.after&&e.before<e.after&&(a.before='This value cannot be before the date in the "after" filter',a.after='This value cannot be after the date in the "before" filter'),"number"===typeof e.lower&&"number"===typeof e.higher&&e.lower<e.higher&&(a.lower='This value cannot be lower than the value in the "Calories above" filter',a.higher='This value cannot be higher than the value in the "Calories below" filter'),a},onSubmit:function(a,t){var n=t.setSubmitting;e.filterFunction(a),n(!1)}},(function(e){return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Filters")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#day-filter","aria-expanded":"false","aria-controls":"day-filter"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"day-filter"},r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-md-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-before"},"Before: "),r.a.createElement(p.b,{id:"day-filter-before",name:"before",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"before"}))),r.a.createElement("div",{className:"form-group col-12 col-md-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-after"},"After: "),r.a.createElement(p.b,{id:"day-filter-after",name:"after",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"after"}))),r.a.createElement("div",{className:"form-group col-12 col-md-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-lower"},"Calories below: "),r.a.createElement(p.b,{id:"day-filter-lower",name:"lower",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"lower"}))),r.a.createElement("div",{className:"form-group col-12 col-md-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-higher"},"Calories above: "),r.a.createElement(p.b,{id:"day-filter-higher",name:"higher",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"higher"}))),r.a.createElement("div",{className:"form-group col-12 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-meal"},"Meal: "),r.a.createElement(p.b,{id:"day-filter-meal",name:"meal",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-md-6  col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-snack"},"Snack: "),r.a.createElement(p.b,{id:"day-filter-snack",name:"snack",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-md-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-drink"},"Drink: "),r.a.createElement(p.b,{id:"day-filter-drink",name:"drink",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-order"},"Order: "),r.a.createElement(p.b,{id:"day-filter-order",name:"order",as:"select",className:"form-control"},r.a.createElement("option",{calue:"date"},"Date"),r.a.createElement("option",{value:"calories"},"Calories"))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-4"},r.a.createElement("label",{htmlFor:"day-filter-ascending"},"Ascending or Descending: "),r.a.createElement(p.b,{id:"day-filter-ascending",name:"ascending",as:"select",className:"form-control"},r.a.createElement("option",null,"Ascending"),r.a.createElement("option",null,"Descending")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{type:"submit",disabled:e.isSubmitting,className:"btn btn-primary mr-1"},"Filter"),r.a.createElement("button",{type:"reset",onClick:a,disabled:!e.dirty||e.isSubmitting,className:"btn btn-secondary"},"Reset"))))))}))},L=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"onSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://lwbjblogdemo2.herokuapp.com/apidata/Day/",this.props.setLoading(),e.next=4,this.props.checkAuth();case 4:if(n=e.sent){e.next=10;break}return alert("Authentication failed. Please login again"),this.props.handleLogout(),this.props.refreshList(),e.abrupt("return",null);case 10:fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the day already exists."),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 11:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.date&&(a.date="Please select a date"),a}},{key:"render",value:function(){var e=this;return r.a.createElement(p.d,{initialValues:{date:""},onSubmit:function(a,t){var n=t.setSubmitting;e.onSubmit(a),n(!1)},validate:function(a){return e.validate(a)}},(function(a){return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Add New Day")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#day-create","aria-expanded":"false","aria-controls":"day-create"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"day-create"},r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"day-create-date"},"Date:"),r.a.createElement(p.b,{id:"day-create-date",name:"date",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"date"})),e.state.responseOK)),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{type:"submit",disabled:a.isSubmitting,className:"btn btn-primary mr-1"},"Create"),r.a.createElement("button",{type:"reset",disabled:!a.dirty||a.isSubmitting,className:"btn btn-secondary"},"Reset"))))))}))}}]),t}(r.a.Component);var O=function(e){var a=0,t=[];if("number"===typeof e.count&&e.count>0){a=Math.ceil(e.count/e.pagination);for(var n=0;n<a;n++)t.push(r.a.createElement("option",{value:n+1},n+1))}var l=e.current>1?r.a.createElement("button",{className:"btn btn-secondary mr-1",onClick:function(){return e.changePage(e.current-1)}},"Back"):r.a.createElement("button",{className:"btn btn-secondary mr-1",disabled:!0},"Back"),s=e.current<a?r.a.createElement("button",{className:"btn btn-secondary mr-1",onClick:function(){return e.changePage(e.current+1)}},"Next"):r.a.createElement("button",{className:"btn btn-secondary mr-1",disabled:!0},"Next");return r.a.createElement("div",{className:"row"},r.a.createElement("label",{className:"col-auto col-form-label",for:e.id+"PageNo"},"Page"),r.a.createElement("div",{className:"col-auto"},r.a.createElement("select",{id:e.id+"PageNo",className:"form-control",value:e.current,onChange:function(a){return e.changePage(a.target.value)}},t)),l,s)},S=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],filters:{before:"",after:"",lower:"",higher:"",meal:"",snack:"",drink:"",order:"date",ascending:!1},page:1},n}return Object(d.a)(t,[{key:"changeFilter",value:function(e){this.setState({loading:!0,page:1,filters:{before:e.before,after:e.after,lower:e.lower,higher:e.higher,meal:e.meal,snack:e.snack,drink:e.drink,order:e.order.toLowerCase(),ascending:"Ascending"===e.ascending}},this.refreshList)}},{key:"setLoading",value:function(){this.setState({loading:!0})}},{key:"changePage",value:function(e){this.setState({loading:!0,page:parseInt(e)},this.refreshList)}},{key:"refreshList",value:function(){var e=this,a="https://lwbjblogdemo2.herokuapp.com/apidata/Day/?page="+this.state.page+"&";a+="before="+this.state.filters.before+"&",a+="after="+this.state.filters.after+"&",a+="lower="+this.state.filters.lower+"&",a+="higher="+this.state.filters.higher+"&",a+="meal="+this.state.filters.meal+"&",a+="snack="+this.state.filters.snack+"&",a+="drink="+this.state.filters.drink+"&",a+="order="+(this.state.filters.ascending?"":"-")+this.state.filters.order,fetch(a).then((function(e){return e.json()})).then((function(a){return e.setState({loading:!1,data:a})})).catch((function(a){return e.setState({loading:!1,data:[]})}))}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){var e,a,t,n=this,l=null;return this.state.loading&&(l=r.a.createElement("div",{className:"loading-indicator border border-secondary"},r.a.createElement("h1",null,"LOADING"))),this.state.data.count&&this.state.data.results&&this.state.data.results.length>0?(e=this.state.data.count,a=this.state.data.results.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6 col-xl-4 p-2",key:e.url},r.a.createElement(N,{day:e,setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:n.props.checkAuth,username:n.props.username}))}))):(e=0,a=r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"No Data"))),this.props.username&&(t=r.a.createElement(L,{setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:this.props.checkAuth,handleLogout:this.props.handleLogout})),r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-12"},l,r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",null,r.a.createElement("strong",null,"Days")))),t,r.a.createElement(w,{filterFunction:function(e){return n.changeFilter(e)}}),r.a.createElement("div",{className:"row mb-1"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn-primary btn",type:"button",onClick:function(){n.setLoading(),n.refreshList()}},"Refresh")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"mt-1"},"Count: ",e))),r.a.createElement(O,{count:e,current:this.state.page,id:"day-top",pagination:20,changePage:function(e){return n.changePage(e)}}),r.a.createElement("div",{className:"row"},a),r.a.createElement(O,{count:e,current:this.state.page,id:"day-bottom",pagination:20,changePage:function(e){return n.changePage(e)}})))}}]),t}(r.a.Component),x=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(this.props.meal.url,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){var a;a=200===e.status?r.a.createElement("p",null,"Item Updated"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the meal name already exists."),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a value":Number.isInteger(e.calories)?e.calories<=0&&(a.calories="Please input a valid integer greater than zero"):a.calories="Please input a valid integer",a}},{key:"render",value:function(){var e=this,a=r.a.createElement(p.d,{initialValues:{name:this.props.meal.name,calories:this.props.meal.calories},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"mealUpdate-name"+e.props.id},"Name:"),r.a.createElement(p.b,{id:"mealUpdate-name"+e.props.id,name:"name",type:"text",className:"form-control"}),r.a.createElement(p.a,{name:"name"})),r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"mealUpdate-calories"+e.props.id},"Calories:"),r.a.createElement(p.b,{id:"mealUpdate-calories"+e.props.id,name:"calories",type:"number",className:"form-control"}),r.a.createElement(p.a,{name:"calories"})),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:a.isSubmitting},"Update"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!a.dirty||a.isSubmitting},"Reset")))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-primary",type:"button","data-toggle":"modal","data-target":"#mealUpdateModal"+this.props.id},"Edit Meal"),r.a.createElement("div",{class:"modal fade",id:"mealUpdateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"mealUpdateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"mealUpdateModalLabel"+this.props.id},"Update ",this.props.meal.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},a),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component);var C=function(e){var a=function(){var a=Object(i.a)(c.a.mark((function a(){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setLoading(),a.next=3,e.checkAuth();case 3:(t=a.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(e.meal.url,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){204===e.status?alert("Meal deleted"):401===e.status?alert("Error Occured. Check login again."):alert("Oops, something went wrong")})).then((function(a){return e.refreshList()})).catch((function(a){alert("Oops, something went wrong"),e.refreshList()}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-danger",type:"button","data-toggle":"modal","data-target":"#mealDeleteModal"+e.id},"Delete Meal"),r.a.createElement("div",{class:"modal fade",id:"mealDeleteModal"+e.id,tabindex:"-1",role:"dialog","aria-labelledby":"mealDeleteModalLabel"+e.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"mealDeleteModalLabel"+e.id},"Delete ",e.meal.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("p",null,"Delete the meal ","'"+e.meal.name+"'","? This action cannot be undone."),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Delete")),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))};var A=function(e){var a,t=e.meal,n=t.days_text.map((function(e){return r.a.createElement("li",{key:e},e)}));return e.username&&(a=r.a.createElement("div",{className:"row mb-4"},r.a.createElement(x,{setLoading:e.setLoading,refreshList:e.refreshList,meal:t,id:t.name.split(" ").join("-")+"-id",checkAuth:e.checkAuth}),r.a.createElement(C,{setLoading:e.setLoading,refreshList:e.refreshList,meal:t,id:t.name.split(" ").join("-")+"-id",checkAuth:e.checkAuth}))),r.a.createElement("div",{className:"col border rounded border-primary p-4 h-100"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h4",null,r.a.createElement("strong",null,t.name)))),a,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Calories: ",t.calories),r.a.createElement("span",null,"Days:"),r.a.createElement("ul",null,n))))};var j=function(e){var a=function(){e.handleFilter({name:"",before:"",after:"",lower:"",greater:"",order:"Name",ascending:"Ascending"})};return r.a.createElement(p.d,{initialValues:{name:"",before:"",after:"",lower:"",greater:"",order:"Name",ascending:"Ascending"},onSubmit:function(a,t){var n=t.setSubmitting;e.handleFilter(a),n(!1)},validate:function(e){var a={};return e.after&&e.before&&e.before<e.after&&(a.before='This value cannot be before the date in the "after" filter',a.after='This value cannot be after the date in the "before" filter'),"number"===typeof e.lower&&"number"===typeof e.greater&&e.lower<e.greater&&(a.lower='This value cannot be lower than the value in the "Calories above" filter',a.greater='This value cannot be higher than the value in the "Calories below" filter'),a}},(function(e){return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Filters")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#meal-filter","aria-expanded":"false","aria-controls":"meal-filter"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"meal-filter"},r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-lg-6"},r.a.createElement("label",{htmlFor:"mealFilter-name"},"Name:"),r.a.createElement(p.b,{id:"mealFilter-name",name:"name",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-before"},"Date before:"),r.a.createElement(p.b,{id:"mealFilter-before",name:"before",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"before"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-after"},"Date after:"),r.a.createElement(p.b,{id:"mealFilter-after",name:"after",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"after"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-lower"},"Calories below:"),r.a.createElement(p.b,{id:"mealFilter-lower",name:"lower",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"lower"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-greater"},"Calories above:"),r.a.createElement(p.b,{id:"mealFilter-greater",name:"greater",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"greater"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-order"},"Order:"),r.a.createElement(p.b,{id:"mealFilter-order",name:"order",as:"select",className:"form-control"},r.a.createElement("option",null,"Name"),r.a.createElement("option",null,"Calories"))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"mealFilter-ascending"},"Ascending or Descending:"),r.a.createElement(p.b,{id:"mealFilter-ascending",name:"ascending",as:"select",className:"form-control"},r.a.createElement("option",null,"Ascending"),r.a.createElement("option",null,"Descending")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:e.isSubmitting},"Filter"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!e.dirty||e.isSubmitting,onClick:a},"Reset"))))))}))},D=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a valid integer":Number.isInteger(e.calories)?e.calories<0&&(a.calories="Please input a valid integer greater than or equals to 0"):a.calories="Please input a valid integer",a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),t="https://lwbjblogdemo2.herokuapp.com/apidata/MainMeal/",e.next=4,this.props.checkAuth();case 4:if(n=e.sent){e.next=10;break}return alert("Authentication failed. Please login again"),this.props.handleLogout(),this.props.refreshList(),e.abrupt("return",null);case 10:fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the meal name already exists."),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 11:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(p.d,{initialValues:{name:"",calories:""},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Add New Meal")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#meal-create","aria-expanded":"false","aria-controls":"meal-create"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"meal-create"},r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"mealCreate-name"},"Name:"),r.a.createElement(p.b,{id:"mealCreate-name",name:"name",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"name"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"mealCreate-calories"},"Calories:"),r.a.createElement(p.b,{id:"mealCreate-calories",name:"calories",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"calories"}))),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:a.isSubmitting},"Create"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!a.dirty||a.isSubmitting},"Reset"))))))}))}}]),t}(r.a.Component),F=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],filters:{name:"",before:"",after:"",lower:"",greater:"",order:"name",ascending:!0},page:1},n}return Object(d.a)(t,[{key:"setLoading",value:function(){this.setState({loading:!0})}},{key:"changePage",value:function(e){this.setState({loading:!0,page:parseInt(e)},this.refreshList())}},{key:"changeFilter",value:function(e){this.setState({loading:!0,filters:{name:e.name,before:e.before,after:e.after,lower:e.lower,greater:e.greater,order:e.order.toLowerCase(),ascending:"Ascending"===e.ascending},page:1},this.refreshList)}},{key:"refreshList",value:function(){var e=this,a="https://lwbjblogdemo2.herokuapp.com/apidata/MainMeal/?page="+this.state.page+"&";a+="name="+this.state.filters.name+"&",a+="before="+this.state.filters.before+"&",a+="after="+this.state.filters.after+"&",a+="lower="+this.state.filters.lower+"&",a+="greater="+this.state.filters.greater+"&",a+="order="+(this.state.filters.ascending?"":"-")+this.state.filters.order,fetch(a).then((function(e){return e.json()})).then((function(a){return e.setState({loading:!1,data:a})})).catch((function(a){return e.setState({loading:!1,data:[]})}))}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){var e,a,t,n=this,l=null;return this.state.loading&&(l=r.a.createElement("div",{className:"loading-indicator border border-secondary"},r.a.createElement("h1",null,"LOADING"))),this.state.data.count&&this.state.data.results&&this.state.data.results.length>0?(a=this.state.data.count,e=this.state.data.results.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6 col-lg-4 p-2",key:e.url},r.a.createElement(A,{meal:e,setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},username:n.props.username,checkAuth:n.props.checkAuth}))}))):(a=0,e=r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"No Data"))),this.props.username&&(t=r.a.createElement(D,{setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:this.props.checkAuth,handleLogout:this.props.handleLogout})),r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-12"},l,r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",null,r.a.createElement("strong",null,"Meals")))),t,r.a.createElement(j,{handleFilter:function(e){n.changeFilter(e)}}),r.a.createElement("div",{className:"row mb-1"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn-primary btn",type:"button",onClick:function(){n.setLoading(),n.refreshList()}},"Refresh")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"mt-1"},"Count: ",a))),r.a.createElement(O,{count:a,current:this.state.page,id:"meal-top",pagination:20,changePage:function(e){return n.changePage(e)}}),r.a.createElement("div",{className:"row"},e),r.a.createElement(O,{count:a,current:this.state.page,id:"meal-bottom",pagination:20,changePage:function(e){return n.changePage(e)}})))}}]),t}(r.a.Component),M=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responsOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a value":Number.isInteger(e.calories)?e.calories<=0&&(a.calories="Please input a valid integer greater than zero"):a.calories="Please input a valid integer",a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(this.props.snack.url,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){var a;a=200===e.status?r.a.createElement("p",null,"Item Updated"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the snack name already exists."),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=r.a.createElement(p.d,{initialValues:{name:this.props.snack.name,calories:this.props.snack.calories},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"snackUpdate-name"+e.props.id},"Name:"),r.a.createElement(p.b,{id:"snackUpdate-name"+e.props.id,name:"name",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"name"}))),r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"snackUpdate-calories"+e.props.id},"Calories:"),r.a.createElement(p.b,{id:"snackUpdate-calories"+e.props.id,name:"calories",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"calories"}))),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:a.isSubmitting},"Update"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!a.dirty||a.isSubmitting},"Reset")))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-primary",type:"button","data-toggle":"modal","data-target":"#snackUpdateModal"+this.props.id},"Edit Snack"),r.a.createElement("div",{class:"modal fade",id:"snackUpdateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"snackUpdateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"snackUpdateModalLabel"+this.props.id},"Update ",this.props.snack.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},a),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component);var P=function(e){var a=function(){var a=Object(i.a)(c.a.mark((function a(){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setLoading(),a.next=3,e.checkAuth();case 3:(t=a.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(e.snack.url,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){204===e.status?alert("Snack Deleted"):401===e.status?alert("Error Occured. Check login again."):alert("Oops, something went wrong")})).then((function(a){return e.refreshList()})).catch((function(a){alert("Oops, something went wrong"),e.refreshList()}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-danger",type:"button","data-toggle":"modal","data-target":"#snackDeleteModal"+e.id},"Delete Snack"),r.a.createElement("div",{class:"modal fade",id:"snackDeleteModal"+e.id,tabindex:"-1",role:"dialog","aria-labelledby":"snackDeleteModalLabel"+e.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"snackDeleteModalLabel"+e.id},"Delete ",e.snack.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},r.a.createElement("p",null,"Delete the snack ","'"+e.snack.name+"'","? This action cannot be undone."),r.a.createElement("button",{className:"btn btn-danger",type:"button",onClick:a,"data-dismiss":"modal"},"Delete")),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))};var I=function(e){var a,t=e.snack.days_text.map((function(e){return r.a.createElement("li",{key:e},e)}));return e.username&&(a=r.a.createElement("div",{className:"row mb-4"},r.a.createElement(M,{setLoading:e.setLoading,refreshList:e.refreshList,snack:e.snack,id:e.snack.name.split(" ").join("-"),checkAuth:e.checkAuth}),r.a.createElement(P,{setLoading:e.setLoading,refreshList:e.refreshList,snack:e.snack,id:e.snack.name.split(" ").join("-"),checkAuth:e.checkAuth}))),r.a.createElement("div",{className:"col-12 border rounded border-primary h-100 p-4"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,r.a.createElement("strong",null,e.snack.name)))),a,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Calories: ",e.snack.calories),r.a.createElement("ul",null,t))))};var T=function(e){var a=function(){e.handleFilter({name:"",lower:"",greater:"",before:"",after:"",order:"Name",ascending:"Ascending"})},t=r.a.createElement(p.d,{initialValues:{name:"",before:"",after:"",lower:"",greater:"",order:"Name",ascending:"Ascending"},validate:function(e){var a={};return e.after&&e.before&&e.before<e.after&&(a.before='This value cannot be before the date in the "after" filter',a.after='This value cannot be after the date in the "before" filter'),"number"===typeof e.lower&&"number"===typeof e.greater&&e.lower<e.greater&&(a.lower='This value cannot be lower than the value in the "Calories above" filter',a.greater='This value cannot be higher than the value in the "Calories below" filter'),a},onSubmit:function(a,t){var n=t.setSubmitting;e.handleFilter(a),n(!1)}},(function(e){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-lg-6"},r.a.createElement("label",{htmlFor:"snackFilter-name"},"Name:"),r.a.createElement(p.b,{id:"snackFilter-name",name:"name",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-before"},"Date before:"),r.a.createElement(p.b,{id:"snackFilter-before",name:"before",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"before"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-after"},"Date after:"),r.a.createElement(p.b,{id:"snackFilter-after",name:"after",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"after"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-lower"},"Calories below:"),r.a.createElement(p.b,{id:"snackFilter-lower",name:"lower",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"lower"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-greater"},"Calories above:"),r.a.createElement(p.b,{id:"snackFilter-greater",name:"greater",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"greater"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-order"},"Order:"),r.a.createElement(p.b,{id:"snackFilter-order",name:"order",as:"select",className:"form-control"},r.a.createElement("option",null,"Name"),r.a.createElement("option",null,"Calories"))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"snackFilter-ascending"},"Ascending or Descending:"),r.a.createElement(p.b,{id:"snackFilter-ascending",name:"ascending",as:"select",className:"form-control"},r.a.createElement("option",null,"Ascending"),r.a.createElement("option",null,"Descending")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{type:"submit",disabled:e.isSubmitting,className:"btn btn-primary mr-1"},"Filter"),r.a.createElement("button",{type:"reset",disabled:!e.dirty||e.isSubmitting,className:"btn btn-secondary",onClick:a},"Reset")))}));return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Filters")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#snack-filter","aria-expanded":"false","aria-controls":"snack-filter"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"snack-filter"},t)))},K=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a valid integer":Number.isInteger(e.calories)?e.calories<0&&(a.calories="Please input a valid integer greater than or equals to 0"):a.calories="Please input a valid integer",a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),t="https://lwbjblogdemo2.herokuapp.com/apidata/Snack/",e.next=4,this.props.checkAuth();case 4:if(n=e.sent){e.next=10;break}return alert("Authentication failed. Please login again"),this.props.handleLogout(),this.props.refreshList(),e.abrupt("return",null);case 10:fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the snack name already exists."),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 11:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=r.a.createElement(p.d,{initialValues:{name:"",calories:""},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"snackCreate-name"},"Name:"),r.a.createElement(p.b,{id:"snackCreate-name",name:"name",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"name"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"snackCreate-calories"},"Calories:"),r.a.createElement(p.b,{id:"snackCreate-calories",name:"calories",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"calories"}))),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{type:"submit",disabled:a.isSubmitting,className:"btn btn-primary mr-1"},"Create"),r.a.createElement("button",{type:"reset",disabled:!a.dirty||a.isSubmitting,className:"btn btn-secondary"},"Reset")))}));return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Add New Snack")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#snack-create","aria-expanded":"false","aria-controls":"snack-create"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"snack-create"},a)))}}]),t}(r.a.Component),U=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],page:1,filters:{name:"",lower:"",greater:"",before:"",after:"",order:"name",ascending:!0}},n}return Object(d.a)(t,[{key:"changeFilter",value:function(e){this.setState({loading:!0,page:1,filters:{name:e.name,lower:e.lower,greater:e.greater,before:e.before,after:e.after,order:e.order.toLowerCase(),ascending:"Ascending"===e.ascending}},this.refreshList)}},{key:"changePage",value:function(e){this.setState({loading:!0,page:parseInt(e)},this.refreshList)}},{key:"setLoading",value:function(){this.setState({loading:!0})}},{key:"refreshList",value:function(){var e=this,a="https://lwbjblogdemo2.herokuapp.com/apidata/Snack/?page="+this.state.page+"&";a+="name="+this.state.filters.name+"&",a+="lower="+this.state.filters.lower+"&",a+="greater="+this.state.filters.greater+"&",a+="before="+this.state.filters.before+"&",a+="after="+this.state.filters.after+"&",a+="name="+this.state.filters.name+"&",a+="order="+(this.state.filters.ascending?"":"-")+this.state.filters.order,fetch(a).then((function(e){return e.json()})).then((function(a){return e.setState({loading:!1,data:a})})).catch((function(a){return e.setState({loading:!1,data:[]})}))}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){var e,a,t,n=this,l=null;return this.state.loading&&(l=r.a.createElement("div",{className:"loading-indicator border border-secondary"},r.a.createElement("h1",null,"LOADING"))),this.state.data.results&&this.state.data.count&&this.state.data.results.length>0?(e=this.state.data.results.map((function(e){return r.a.createElement("div",{key:e.url,className:"col-12 col-md-6 col-lg-4 p-2"},r.a.createElement(I,{snack:e,setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:n.props.checkAuth,username:n.props.username}))})),a=this.state.data.count):(e=r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"No Data")),a=0),this.props.username&&(t=r.a.createElement(K,{refreshList:function(){return n.refreshList()},setLoading:function(){return n.setLoading()},checkAuth:this.props.checkAuth,handleLogout:this.props.handleLogout})),r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-12"},l,r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",null,r.a.createElement("strong",null,"Snacks")))),t,r.a.createElement(T,{handleFilter:function(e){return n.changeFilter(e)}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){n.setLoading(),n.refreshList()}},"Refresh")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"mt-2"},"Count: ",a))),r.a.createElement(O,{count:a,current:this.state.page,id:"snack-top",pagination:20,changePage:function(e){return n.changePage(e)}}),r.a.createElement("div",{className:"row"},e),r.a.createElement(O,{count:a,current:this.state.page,id:"snack-bottom",pagination:20,changePage:function(e){return n.changePage(e)}})))}}]),t}(r.a.Component),B=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a valid integer":Number.isInteger(e.calories)?e.calories<0&&(a.calories="Please input a valid integer greater than or equals to 0"):a.calories="Please input a valid integer",a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),e.next=3,this.props.checkAuth();case 3:(t=e.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(this.props.drink.url,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(a)}).then((function(e){var a;a=200===e.status?r.a.createElement("p",null,"Item Updated"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the drink name already exists."),n.setState({responseOK:a})})).then((function(e){return n.props.refreshList()})).then((function(e){setTimeout((function(){return n.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),n.props.refreshList()}));case 6:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=r.a.createElement(p.d,{initialValues:{name:this.props.drink.name,calories:this.props.drink.calories},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"drinkUpdate-name"+e.props.id},"Name:"),r.a.createElement(p.b,{id:"drinkUpdate-name"+e.props.id,name:"name",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"name"}))),r.a.createElement("div",{className:"form-group col-12 col-md-6"},r.a.createElement("label",{htmlFor:"drinkUpdate-calories"+e.props.id},"Calories:"),r.a.createElement(p.b,{id:"drinkUpdate-calories"+e.props.id,name:"calories",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"calories"}))),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:a.isSubmitting},"Update"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!a.dirty||a.isSubmitting},"Reset")))}));return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-primary",type:"button","data-toggle":"modal","data-target":"#drinkUpdateModal"+this.props.id},"Edit Drink"),r.a.createElement("div",{class:"modal fade",id:"drinkUpdateModal"+this.props.id,tabindex:"-1",role:"dialog","aria-labelledby":"drinkUpdateModalLabel"+this.props.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"drinkUpdateModalLabel"+this.props.id},"Update ",this.props.drink.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},a),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))}}]),t}(r.a.Component);var z=function(e){var a=function(){var a=Object(i.a)(c.a.mark((function a(){var t;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setLoading(),a.next=3,e.checkAuth();case 3:(t=a.sent)||(alert("Authentication failed. Please login again"),window.location.reload()),fetch(e.drink.url,{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){204===e.status?alert("Item deleted"):401===e.status?alert("Error Occured. Check login again."):alert("Oops, something went wrong")})).then((function(a){return e.refreshList()})).catch((function(a){alert("Oops, something went wrong"),e.refreshList()}));case 6:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn btn-danger",type:"button","data-toggle":"modal","data-target":"#drinkDeleteModal"+e.id},"Delete Drink"),r.a.createElement("div",{class:"modal fade",id:"drinkDeleteModal"+e.id,tabindex:"-1",role:"dialog","aria-labelledby":"drinkDeleteModalLabel"+e.id,"aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"drinkDeleteModalLabel"+e.id},"Delete ",e.drink.name),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},r.a.createElement("p",null,"Delete the drink ","'"+e.drink.name+"'","? This action cannot be undone."),r.a.createElement("button",{onClick:a,type:"button",className:"btn btn-danger","data-dismiss":"modal"},"Delete")),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close"))))))};var V=function(e){var a,t=e.drink.days_text.map((function(e){return r.a.createElement("li",{key:e},e)}));return e.username&&(a=r.a.createElement("div",{className:"row mb-4"},r.a.createElement(B,{drink:e.drink,id:e.drink.name.split(" ").join("-"),setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}),r.a.createElement(z,{drink:e.drink,id:e.drink.name.split(" ").join("-"),setLoading:e.setLoading,refreshList:e.refreshList,checkAuth:e.checkAuth}))),r.a.createElement("div",{className:"col-12 border rounded border-primary p-4 h-100"},r.a.createElement("div",{className:"row mb-2"},r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,r.a.createElement("strong",null,e.drink.name)))),a,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("p",null,"Calories: ",e.drink.calories),r.a.createElement("ul",null,t))))};var R=function(e){var a=function(){e.handleFilter({name:"",before:"",after:"",lower:"",greater:"",order:"Name",ascending:"Ascending"})},t=r.a.createElement(p.d,{initialValues:{name:"",before:"",after:"",lower:"",greater:"",order:"Name",ascending:"Ascending"},validate:function(e){var a={};return e.after&&e.before&&e.before<e.after&&(a.before='This value cannot be before the date in the "after" filter',a.after='This value cannot be after the date in the "before" filter'),"number"===typeof e.lower&&"number"===typeof e.greater&&e.lower<e.greater&&(a.lower='This value cannot be lower than the value in the "Calories above" filter',a.greater='This value cannot be higher than the value in the "Calories below" filter'),a},onSubmit:function(a,t){var n=t.setSubmitting;e.handleFilter(a),n(!1)}},(function(e){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-lg-6"},r.a.createElement("label",{htmlFor:"drinkFilter-name"},"Name:"),r.a.createElement(p.b,{id:"drinkFilter-name",name:"name",type:"text",className:"form-control"})),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-before"},"Date Before:"),r.a.createElement(p.b,{id:"drinkFilter-before",name:"before",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"before"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-after"},"Date After:"),r.a.createElement(p.b,{id:"drinkFilter-after",name:"after",type:"date",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"after"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-lower"},"Calories Below:"),r.a.createElement(p.b,{id:"drinkFilter-lower",name:"lower",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"lower"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-greater"},"Calories Above:"),r.a.createElement(p.b,{id:"drinkFilter-greater",name:"greater",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"greater"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-order"},"Order:"),r.a.createElement(p.b,{id:"drinkFilter-order",name:"order",as:"select",className:"form-control"},r.a.createElement("option",null,"Name"),r.a.createElement("option",null,"Calories"))),r.a.createElement("div",{className:"form-group col-12 col-sm-6 col-lg-3"},r.a.createElement("label",{htmlFor:"drinkFilter-ascending"},"Ascending or Descending:"),r.a.createElement(p.b,{id:"drinkFilter-ascending",name:"ascending",as:"select",className:"form-control"},r.a.createElement("option",null,"Ascending"),r.a.createElement("option",null,"Descending")))),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:e.isSubmitting},"Filter"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!e.dirty||e.isSubmitting,onClick:a},"Reset")))}));return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Filters")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#drink-filter","aria-expanded":"false","aria-controls":"drink-filter"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"drink-filter"},t)))},J=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={responseOK:null},n}return Object(d.a)(t,[{key:"validate",value:function(e){var a={};return""===e.name&&(a.name="Please input a value"),""===e.calories?a.calories="Please input a valid integer":Number.isInteger(e.calories)?e.calories<0&&(a.calories="Please input a valid integer greater than or equals to 0"):a.calories="Please input a valid integer",a}},{key:"handleSubmit",value:function(){var e=Object(i.a)(c.a.mark((function e(a){var t,n,l=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.setLoading(),t="https://lwbjblogdemo2.herokuapp.com/apidata/Drink/",e.next=4,this.props.checkAuth();case 4:if(n=e.sent){e.next=10;break}return alert("Authentication failed. Please login again"),this.props.handleLogout(),this.props.refreshList(),e.abrupt("return",null);case 10:fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(a)}).then((function(e){var a;a=201===e.status?r.a.createElement("p",null,"Item Created"):401===e.status?r.a.createElement("p",{className:"text-danger"},"Error Occured. Check login again."):r.a.createElement("p",{className:"text-danger"},"Error Occured. Check if the drink name already exists."),l.setState({responseOK:a})})).then((function(e){return l.props.refreshList()})).then((function(e){setTimeout((function(){return l.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),l.props.refreshList()}));case 11:case"end":return e.stop()}}),e,this)})));return function(a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=r.a.createElement(p.d,{initialValues:{name:"",calories:""},validate:function(a){return e.validate(a)},onSubmit:function(a,t){var n=t.setSubmitting;e.handleSubmit(a),n(!1)}},(function(a){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"drinkCreate-name"},"Name:"),r.a.createElement(p.b,{id:"drinkCreate-name",name:"name",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"name"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"drinkCreate-calories"},"Calories:"),r.a.createElement(p.b,{id:"drinkCreate-calories",name:"calories",type:"number",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"calories"}))),e.state.responseOK),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:a.isSubmitting},"Create"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!a.dirty||a.isSubmitting},"Reset")))}));return r.a.createElement("div",{className:"row border rounded border-primary p-4 mb-4"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h3",null,"Add New Drink")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{class:"btn btn-primary",type:"button","data-toggle":"collapse","data-target":"#drink-create","aria-expanded":"false","aria-controls":"drink-create"},"Expand"))),r.a.createElement("div",{class:"collapse",id:"drink-create"},a)))}}]),t}(r.a.Component),_=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={loading:!0,data:[],page:1,filters:{name:"",before:"",after:"",lower:"",greater:"",order:"name",ascending:!0}},n}return Object(d.a)(t,[{key:"setLoading",value:function(){this.setState({loading:!0})}},{key:"changePage",value:function(e){this.setState({page:parseInt(e),loading:!0},this.refreshList)}},{key:"changeFilter",value:function(e){this.setState({loading:!0,page:1,filters:{name:e.name,before:e.before,after:e.after,lower:e.lower,greater:e.greater,order:e.order.toLowerCase(),ascending:"Ascending"===e.ascending}},this.refreshList)}},{key:"refreshList",value:function(){var e=this,a="https://lwbjblogdemo2.herokuapp.com/apidata/Drink/?page="+this.state.page+"&";a+="name="+this.state.filters.name+"&",a+="before="+this.state.filters.before+"&",a+="after="+this.state.filters.after+"&",a+="lower="+this.state.filters.lower+"&",a+="greater="+this.state.filters.greater+"&",a+="order="+(this.state.filters.ascending?"":"-")+this.state.filters.order,fetch(a).then((function(e){return e.json()})).then((function(a){e.setState({loading:!1,data:a})})).catch((function(a){e.setState({loading:!1,data:[]})}))}},{key:"componentDidMount",value:function(){this.refreshList()}},{key:"render",value:function(){var e,a,t,n=this,l=this.state.loading?r.a.createElement("div",{className:"loading-indicator border border-secondary"},r.a.createElement("h1",null,"LOADING")):null;return this.state.data.results&&this.state.data.count&&this.state.data.results.length>0?(e=this.state.data.results.map((function(e){return r.a.createElement("div",{className:"col-12 col-md-6 col-lg-4 p-2",key:e.url},r.a.createElement(V,{drink:e,setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:n.props.checkAuth,username:n.props.username}))})),a=this.state.data.count):(a=0,e=r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"No Data"))),this.props.username&&(t=r.a.createElement(J,{setLoading:function(){return n.setLoading()},refreshList:function(){return n.refreshList()},checkAuth:this.props.checkAuth,handleLogout:this.props.handleLogout})),r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-12"},l,r.a.createElement("div",{className:"row mb-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("h2",null,r.a.createElement("strong",null,"Drinks")))),t,r.a.createElement(R,{handleFilter:function(e){return n.changeFilter(e)}}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){n.setLoading(),n.refreshList()}},"Refresh")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("p",{className:"mt-1"},"Count: ",a))),r.a.createElement(O,{count:a,current:this.state.page,id:"drink-top",pagination:20,changePage:function(e){return n.changePage(e)}}),r.a.createElement("div",{className:"row"},e),r.a.createElement(O,{count:a,current:this.state.page,id:"drink-bottom",pagination:20,changePage:function(e){return n.changePage(e)}})))}}]),t}(r.a.Component);var q=function(e){return r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-12"},r.a.createElement("ul",{className:"nav nav-tabs",id:"myTab",role:"tablist"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link active",id:"day-tab","data-toggle":"tab",href:"#day-tab-content",role:"tab","aria-controls":"day-tab-content","aria-selected":"true"},"Days")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",id:"main-meal-tab","data-toggle":"tab",href:"#main-meal-tab-content",role:"tab","aria-controls":"main-meal-tab-content","aria-selected":"false"},"Meals")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",id:"snack-tab","data-toggle":"tab",href:"#snack-tab-content",role:"tab","aria-controls":"snack-tab-content","aria-selected":"false"},"Snacks")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",id:"drink-tab","data-toggle":"tab",href:"#drink-tab-content",role:"tab","aria-controls":"drink-tab-content","aria-selected":"false"},"Drinks"))),r.a.createElement("div",{className:"tab-content",id:"myTabContent"},r.a.createElement("div",{className:"tab-pane fade show active",id:"day-tab-content",role:"tabpanel","aria-labelledby":"day-tab"},r.a.createElement(S,{username:e.username,checkAuth:e.checkAuth,handleLogout:e.handleLogout})),r.a.createElement("div",{className:"tab-pane fade",id:"main-meal-tab-content",role:"tabpanel","aria-labelledby":"main-meal-tab"},r.a.createElement(F,{username:e.username,checkAuth:e.checkAuth,handleLogout:e.handleLogout})),r.a.createElement("div",{className:"tab-pane fade",id:"snack-tab-content",role:"tabpanel","aria-labelledby":"snack-tab"},r.a.createElement(U,{username:e.username,checkAuth:e.checkAuth,handleLogout:e.handleLogout})),r.a.createElement("div",{className:"tab-pane fade",id:"drink-tab-content",role:"tabpanel","aria-labelledby":"drink-tab"},r.a.createElement(_,{username:e.username,checkAuth:e.checkAuth,handleLogout:e.handleLogout})))))};var G=function(e){var a,t=e.responseOK;return a=e.username?r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("p",null,"Hello ",e.username),r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:e.handleLogout},"Logout"))):r.a.createElement(p.d,{initialValues:{username:"",password:""},onSubmit:function(a,t){var n=t.setSubmitting;e.handleLogin(a),n(!1)},validate:function(e){var a={};return""===e.username&&(a.username="Please input your username"),""===e.password&&(a.password="Please input your password"),a}},(function(e){return r.a.createElement(p.c,null,r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"login-username"},"Username"),r.a.createElement(p.b,{id:"login-username",name:"username",type:"text",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"username"}))),r.a.createElement("div",{className:"form-group col-12 col-sm-6"},r.a.createElement("label",{htmlFor:"login-password"},"Password"),r.a.createElement(p.b,{id:"login-password",name:"password",type:"password",className:"form-control"}),r.a.createElement("span",{className:"text-danger"},r.a.createElement(p.a,{name:"password"}))),t),r.a.createElement("div",{className:"form-row"},r.a.createElement("button",{className:"btn btn-primary mr-1",type:"submit",disabled:e.isSubmitting},"Login"),r.a.createElement("button",{className:"btn btn-secondary",type:"reset",disabled:!e.dirty||e.isSubmitting},"Reset")))})),r.a.createElement("div",{className:"row py-4 my-4"},r.a.createElement("div",{className:"col"},r.a.createElement("h1",null,"LWBJ Blog Demo 2")),r.a.createElement("div",{className:"col-auto"},r.a.createElement("button",{className:"btn mt-2 "+(e.username?"btn-secondary":"btn-primary"),type:"button","data-toggle":"modal","data-target":"#loginModal"},e.username?"Logout":"Admin Login"),r.a.createElement("div",{class:"modal fade",id:"loginModal",tabindex:"-1",role:"dialog","aria-labelledby":"loginModalLabel","aria-hidden":"true"},r.a.createElement("div",{class:"modal-dialog",role:"document"},r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"loginModalLabel"},"Admin Login"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body p-4"},a),r.a.createElement("div",{class:"modal-footer"},r.a.createElement("button",{type:"button",class:"btn btn-secondary","data-dismiss":"modal"},"Close")))))))},H=function(e){Object(u.a)(t,e);var a=Object(h.a)(t);function t(e){var n;return Object(m.a)(this,t),(n=a.call(this,e)).state={username:null,responseOK:null},n}return Object(d.a)(t,[{key:"handleLogin",value:function(e){var a=this;if(this.state.username)return null;this.setState({responseOK:r.a.createElement("p",null,"Loading...")});fetch("https://lwbjblogdemo2.herokuapp.com/apidata/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){e.refresh?(localStorage.setItem("refreshToken",e.refresh),a.setState({username:e.username,responseOK:r.a.createElement("p",null,"Login success!")})):a.setState({responseOK:r.a.createElement("p",{className:"text-danger"},"Username or password incorrect")})})).then((function(e){setTimeout((function(){return a.setState({responseOK:null})}),3e3)})).catch((function(e){alert("Oops, something went wrong"),a.setState({responseOK:null})}))}},{key:"handleLogout",value:function(){this.setState({username:null}),localStorage.removeItem("refreshToken")}},{key:"checkAuth",value:function(){var e=Object(i.a)(c.a.mark((function e(){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://lwbjblogdemo2.herokuapp.com/apidata/token-refresh",e.next=3,fetch("https://lwbjblogdemo2.herokuapp.com/apidata/token-refresh",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:localStorage.getItem("refreshToken")})}).then((function(e){return e.json()})).then((function(e){return e.access?e.access:null})).catch((function(e){alert("Oops, something went wrong")}));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(i.a)(c.a.mark((function e(){var a,t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.checkAuth();case 2:(a=e.sent)?("https://lwbjblogdemo2.herokuapp.com/apidata/current-user",fetch("https://lwbjblogdemo2.herokuapp.com/apidata/current-user",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(e){t.setState({username:e.username})})).catch((function(e){alert("Oops, something went wrong")}))):this.handleLogout(),this.setState({loading:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(G,{handleLogin:function(a){return e.handleLogin(a)},handleLogout:function(){return e.handleLogout()},username:this.state.username,responseOK:this.state.responseOK}),r.a.createElement(q,{username:this.state.username,checkAuth:function(){return e.checkAuth()},handleLogout:function(){return e.handleLogout()}}))}}]),t}(r.a.Component);var W=function(){return r.a.createElement("div",{className:"container p-4"},r.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(31);s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.ae9b6319.chunk.js.map